class Attribute{constructor(t,i){this.table=t,this.name=i,this.attr=i,this.weight=0,this.diffEdges=0,this.randomEdges=0,this.sameEdges=0,this.mutable=!0}compareTo(t){return this.weight>t.weight?-1:this.weight<t.weight?1:0}}
class DumbHeuristic{constructor(t){this.g=t}arrange(){for(let t=0;t<this.g.maxDepth;t++){let e=g.edgeIndex[t];e=e.sort((t,e)=>t.compareTo(e));for(let t=0;t<e.length-1;t++){let i=e[t],r=e[t+1];i.leftTable==r.leftTable&&(i.leftAttribute.mutable||r.leftAttribute.mutable)&&(this.swap(i.leftAttribute,r.leftAttribute),(i.rightAttribute.mutable||r.rightAttribute.mutable)&&(i.rightTable==r.rightTable?this.swap(i.rightAttribute,r.rightAttribute):this.swap(i.rightTable,r.rightTable)))}}}swap(t,e){let i=t.weight;t.weight=e.weight,e.weight=i}}
class Edge{constructor(t,e,i,h){this.leftTable=t,this.att1=e,this.leftAttribute=e,this.rightTable=i,this.att2=h,this.rightAttribute=h}compareTo(t){if(this.leftTable==t.leftTable)if(this.rightTable==t.rightTable){if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightAttribute.weight<t.rightAttribute.weight)return!0;if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.rightTable.weight<t.rightTable.weight&&this.leftAttribute.weight>t.leftAttribute.weight)return!0;if(this.rightTable.weight>t.rightTable.weight&&this.leftAttribute.weight<t.leftAttribute.weight)return!0}else if(this.rightTable==t.rightTable)if(this.leftTable==t.leftTable){if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightAttribute.weight<t.rightAttribute.weight)return!0;if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.leftTable.weight<t.leftTable.weight&&this.rightAttribute.weight>t.rightAttribute.weight)return!0;if(this.leftTable.weight>t.leftTable.weight&&this.rightAttribute.weight<t.rightAttribute.weight)return!0}else{if(this.leftTable.weight<t.leftTable.weight&&this.rightTable.weight>t.rightTable.weight)return!0;if(this.leftTable.weight>t.leftTable.weight&&this.rightTable.weight<t.rightTable.weight)return!0}return!1}compareSelfEdgeTo(t){if(this.leftTable.depth==this.rightTable.depth&&t.leftTable.depth==t.rightTable.depth){if(this.leftTable==t.leftTable)if(this.rightTable==t.rightTable){if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightAttribute.weight<t.rightAttribute.weight)return!0;if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightTable.weight<t.rightTable.weight)return!0;if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightTable.weight>t.rightTable.weight)return!0}else if(this.leftTable==t.rightTable)if(this.rightTable==t.leftTable){if(this.rightAttribute.weight<t.leftAttribute.weight&&this.leftAttribute.weight<t.rightAttribute.weight)return!0;if(this.rightAttribute.weight>t.leftAttribute.weight&&this.leftAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.leftAttribute.weight<t.rightAttribute.weight&&this.rightTable.weight<t.leftTable.weight)return!0;if(this.leftAttribute.weight>t.rightAttribute.weight&&this.rightTable.weight>t.leftTable.weight)return!0}else if(this.rightTable==t.leftTable)if(this.leftTable==t.rightTable){if(this.rightAttribute.weight<t.leftAttribute.weight&&this.leftAttribute.weight<t.rightAttribute.weight)return!0;if(this.rightAttribute.weight>t.leftAttribute.weight&&this.leftAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.rightAttribute.weight<t.leftAttribute.weight&&this.leftTable.weight<t.rightTable.weight)return!0;if(this.rightAttribute.weight>t.leftAttribute.weight&&this.leftTable.weight>t.rightTable.weight)return!0}else if(this.rightTable==t.rightTable)if(this.leftTable==t.leftTable){if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightAttribute.weight<t.rightAttribute.weight)return!0;if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightAttribute.weight>t.rightAttribute.weight)return!0}else{if(this.rightAttribute.weight<t.rightAttribute.weight&&this.leftTable.weight<t.leftTable.weight)return!0;if(this.rightAttribute.weight>t.rightAttribute.weight&&this.leftTable.weight>t.leftTable.weight)return!0}}else if(this.leftTable.depth==this.rightTable.depth)if(this.leftTable==t.leftTable){if(this.leftAttribute.weight<t.leftAttribute.weight&&this.rightTable.weight>t.leftTable.weight)return!0;if(this.leftAttribute.weight>t.leftAttribute.weight&&this.rightTable.weight<t.leftTable.weight)return!0}else if(this.rightTable==t.rightTable){if(this.rightAttribute.weight<t.leftAttribute.weight&&this.leftTable.weight>t.leftTable.weight)return!0;if(this.rightAttribute.weight>t.leftAttribute.weight&&this.leftTable.weight<t.leftTable.weight)return!0}else{if(this.leftTable.weight>t.leftTable.weight&&this.rightTable.weight<t.leftTable.weight)return!0;if(this.leftTable.weight<t.leftTable.weight&&this.rightTable.weight>t.leftTable.weight)return!0}else if(t.leftTable==this.leftTable){if(t.leftAttribute.weight<this.leftAttribute.weight&&t.rightTable.weight>this.leftTable.weight)return!0;if(t.leftAttribute.weight>this.leftAttribute.weight&&t.rightTable.weight<this.leftTable.weight)return!0}else if(t.rightTable==this.leftTable){if(t.rightAttribute.weight<this.leftAttribute.weight&&t.leftTable.weight>this.leftTable.weight)return!0;if(t.rightAttribute.weight>this.leftAttribute.weight&&t.leftTable.weight<this.leftTable.weight)return!0}else{if(t.leftTable.weight<this.leftAttribute.weight&&t.rightTable.weight>this.leftAttribute.weight)return!0;if(t.leftTable.weight>this.leftAttribute.weight&&t.rightTable.weight<this.leftAttribute.weight)return!0}}crosses(t){return this.leftTable.depth==this.rightTable.depth||t.leftTable.depth==t.rightTable.depth?this.compareSelfEdgeTo(t):!!this.compareTo(t)}compare(t){if(null==t)return 1;this.compareAttributes(this.leftTable,this.leftAttribute,t.leftTable,t.leftAttribute)}compareAttributes(t,e,i,h){let r=t.compareTo(i);return 0==r&&(r=e.compareTo(h)),r}}
class Graph{constructor(){this.edges=[],this.tables=[],this.tableIndex=[],this.edgeIndex=[],this.maxDepth=0,this.newLayer()}newLayer(){this.tableIndex.push([]),this.edgeIndex.push([])}addTable(t){for(;this.maxDepth<t.depth;)this.maxDepth+=1,this.newLayer();this.tables.push(t),this.tableIndex[t.depth].push(t)}addEdge(t){this.edges.push(t),this.edgeIndex[t.leftTable.depth].push(t)}ensureUniqueEdges(){}getEdgeCrossings(){let t=0;for(let e in this.edgeIndex)t+=this.getEdgeCrossingsAtDepth(e);return t}getEdgeCrossingsAtDepth(t){let e=0,s=this.edgeIndex[t];for(let t in s){let h=s[t];for(let i=parseFloat(t)+1;i<s.length;i++){let t=s[i];h.crosses(t)&&(console.log("Edge "+h.leftAttribute.name+h.rightAttribute.name+" crosses "+t.leftAttribute.name+t.rightAttribute.name),e+=1)}}return e}sortGraph(){for(let t of this.tables)t.main||(t.attributes=t.attributes.sort((t,e)=>t.weight>e.weight?1:-1));this.tables=this.tables.sort((t,e)=>t.weight>e.weight?1:-1)}setExactWeights(){for(let t in this.tableIndex){let e=this.tableIndex[t];e=e.sort((t,e)=>t.weight>e.weight?1:-1);for(let t in e){let s=e[t];s.weight=t;let h=s.attributes;h=h.sort((t,e)=>t.weight>e.weight?1:-1);for(let t in h)h[t].weight=t}}}}
class GraphGenerator{constructor(t=3,e="hello",r=[2,3],a=[1,5]){this.d=t,this.s=3,this.jd=.1,this.js=.05,this.attributeCounter=0,this.seed=e,this.rng=new Math.seedrandom(this.seed),this.tableDist=()=>r[0]+Math.round(this.rng()*(r[1]-r[0])),this.attrDist=()=>a[0]+Math.round(this.rng()*(a[1]-a[0]))}generate(){g=new Graph;for(var t=1;t<this.d;t++){g.newLayer();for(var e=0;e<this.tableDist();e++)g.addTable(this.generateTable(t,e))}return this.generateProjections(g),this.generateJoins(g),g.ensureUniqueEdges(),g}generateTable(t,e){name="T"+t+"_"+e;for(var r=new Table(name,name,!1,t),a=0;a<this.attrDist();a++)r.addAttribute("a"+this.attributeCounter),this.attributeCounter+=1;return r}generateProjections(t){let e=t.tableIndex[1],r=[],a=new Table("select","SELECT",!0,0),s=[],n=[],i=0;for(let t of e){let e=t.attributes,a=e[Math.floor(this.rng()*e.length)];s.push(a),n.push(a);for(let s of e)s!=a&&r.push(new Attribute(t,s));i++}let o=this.s*(r.length+i);for(t.addTable(a);i<o;i++){let t=Math.floor(this.rng()*r.length);r[t];r.splice(t,1)}for(let e of s){let r=new Attribute(a,"a"+this.attributeCounter++);r.mutable=!1,a.attributes.push(r),t.addEdge(new Edge(a,r,e.table,e))}}generateInterLayerJoins(t){for(var e=1;e<this.d;e++){let r=t.tableIndex[e],a=t.tableIndex[e+1],s=[],n=[];for(let t of r){let e=t.attributes;for(let r of e)s.push(new Attribute(t,r))}for(let e of a){if(0==s.length)break;let r=e.attributes,a=r[Math.floor(this.rng()*r.length)],i=Math.floor(this.rng()*s.length),o=s[i];s.splice(i,1),t.addEdge(new Edge(o.table,o.attr,e,a)),o.diffEdges++,a.diffEdges++;for(let t of r)t!=a&&n.push(new Attribute(e,t))}for(let e of s){if(0==n.length)break;if(this.rng()<this.jd){let r=Math.floor(this.rng()*n.length),a=n[r];n.splice(r,1),t.addEdge(new Edge(e.table,e.attr,a.table,a.attr)),e.diffEdges++,a.diffEdges++}}}}generateInLayerJoins(){for(var t=1;t<this.d;t++){let e=g.tableIndex[t];for(let t of e){let r=[],a=[];for(let e of t.attributes)r.push(new Attribute(t,e));for(let r of e)if(t!=r)for(let t of r.attributes)0==t.sameEdges&&a.push(new Attribute(r,t));for(let t of r){if(0==a.length)break;if(this.rng()<this.js){let e=Math.floor(this.rng()*a.length),r=a[e];a.splice(e,1),g.addEdge(new Edge(t.table,t.attr,r.table,r.attr)),t.sameEdges++,r.sameEdges++}}}}}generateRandomJoins(){}generateJoins(t){this.generateInterLayerJoins(t),this.generateInLayerJoins(t),this.generateRandomJoins(t)}}
class Sweep{constructor(t){this.g=t}arrange(){this.g.setExactWeights(),this.sweepRight(),this.sweepLeft()}sweepRight(){for(let t=1;t<this.g.maxDepth;t++){let e,s,g=this.g.tableIndex[t];do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t),s=e;do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t),s=e;for(let e=0;e<g.length-1;e++){let h=g[e],i=g[e+1];this.swap(h,i);let l=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t);s>l?(s=l,g[e]=i,g[e+1]=h):this.swap(h,i)}}while(e>s);do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t),s=e;for(let e=0;e<g.length;e++){let h=g[e].attributes;for(let e=0;e<h.length-1;e++){let g=h[e],i=h[e+1];this.swap(g,i);let l=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t);s>l?(s=l,h[e]=i,h[e+1]=g):this.swap(g,i)}}}while(e>s)}while(e>s)}}sweepLeft(){for(let t=this.g.maxDepth;t>=2;t--){let e,s,g=this.g.tableIndex[t-1];do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t-2),s=e;do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t-2),s=e;for(let e=0;e<g.length-1;e++){let h=g[e],i=g[e+1];this.swap(h,i);let l=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t-2);s>l?(s=l,g[e]=i,g[e+1]=h):this.swap(h,i)}}while(e>s);do{e=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t-2),s=e;for(let e=0;e<g.length;e++){let h=g[e].attributes;for(let e=0;e<h.length-1;e++){let g=h[e],i=h[e+1];this.swap(g,i);let l=this.g.getEdgeCrossingsAtDepth(t-1)+this.g.getEdgeCrossingsAtDepth(t-2);s>l?(s=l,h[e]=i,h[e+1]=g):this.swap(g,i)}}}while(e>s)}while(e>s)}}swap(t,e){let s=t.weight;t.weight=e.weight,e.weight=s}}
class Table{constructor(t,h,i,e){this.name=t,this.header=h,this.main=i,this.depth=e,this.attributes=[],this.attrMaps=[],this.weight=0}addAttribute(t){this.attributes.push(new Attribute(this,t))}compareTo(t){return this.depth>t.depth?-1:this.depth<t.depth||this.weight<t.weight?1:this.weight>t.weight?-1:0}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkF0dHJpYnV0ZS5qcyIsIkR1bWJIZXVyaXN0aWMuanMiLCJFZGdlLmpzIiwiR3JhcGguanMiLCJHcmFwaEdlbmVyYXRvci5qcyIsIlN3ZWVwLmpzIiwiVGFibGUuanMiXSwibmFtZXMiOlsiQXR0cmlidXRlIiwiW29iamVjdCBPYmplY3RdIiwidGFibGUiLCJuYW1lIiwidGhpcyIsImF0dHIiLCJ3ZWlnaHQiLCJkaWZmRWRnZXMiLCJyYW5kb21FZGdlcyIsInNhbWVFZGdlcyIsIm11dGFibGUiLCJhcmcwIiwiRHVtYkhldXJpc3RpYyIsImciLCJpIiwibWF4RGVwdGgiLCJlZGdlcyIsImVkZ2VJbmRleCIsInNvcnQiLCJhIiwiYiIsImNvbXBhcmVUbyIsImoiLCJsZW5ndGgiLCJlZGdlMSIsImVkZ2UyIiwibGVmdFRhYmxlIiwibGVmdEF0dHJpYnV0ZSIsInN3YXAiLCJyaWdodEF0dHJpYnV0ZSIsInJpZ2h0VGFibGUiLCJ3MSIsIncyIiwidG1wdyIsIkVkZ2UiLCJhdHQxIiwicmlndGhUYWJsZSIsImF0dDIiLCJvdGhlckVkZ2UiLCJkZXB0aCIsImNvbXBhcmVTZWxmRWRnZVRvIiwidW5kZWZpbmVkIiwiY29tcGFyZUF0dHJpYnV0ZXMiLCJ0MSIsImExIiwidDIiLCJhMiIsInJldCIsIkdyYXBoIiwidGFibGVzIiwidGFibGVJbmRleCIsIm5ld0xheWVyIiwicHVzaCIsImVkZ2UiLCJjb3VudCIsImQiLCJnZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aCIsImNyb3NzaW5ncyIsImxheWVyRWRnZXMiLCJjdXJyRWRnZSIsInBhcnNlRmxvYXQiLCJjcm9zc2VzIiwiY29uc29sZSIsImxvZyIsInQiLCJtYWluIiwiYXR0cmlidXRlcyIsImxheWVyVGFibGVzIiwiYXR0cnMiLCJrIiwiR3JhcGhHZW5lcmF0b3IiLCJzZWVkIiwidGFibGVEaXN0cmlidXRpb24iLCJhdHRyaWJ1dGVEaXN0cmlidXRpb24iLCJzIiwiamQiLCJqcyIsImF0dHJpYnV0ZUNvdW50ZXIiLCJybmciLCJNYXRoIiwic2VlZHJhbmRvbSIsInRhYmxlRGlzdCIsInJvdW5kIiwiYXR0ckRpc3QiLCJhZGRUYWJsZSIsImdlbmVyYXRlVGFibGUiLCJnZW5lcmF0ZVByb2plY3Rpb25zIiwiZ2VuZXJhdGVKb2lucyIsImVuc3VyZVVuaXF1ZUVkZ2VzIiwiaW5kZXgiLCJuZXdUYWJsZSIsIlRhYmxlIiwiYWRkQXR0cmlidXRlIiwibGF5ZXIxIiwibGF5ZXIxYXR0cnMiLCJzZWxlY3RUYWJsZSIsInByb2plY3RlZEF0dHJzIiwicHJvamVjdGVkIiwicHJvamVjdGVkQ291bnQiLCJzdHJpY3QiLCJmbG9vciIsImNvdW50UHJvamVjdGlvbnMiLCJhdHRySW5kZXgiLCJzcGxpY2UiLCJuZXdBdHRyIiwiYWRkRWRnZSIsImxlZnRMYXllciIsInJpZ2h0TGF5ZXIiLCJsZWZ0TGF5ZXJBdHRycyIsInJpZ2h0TGF5ZXJBdHRycyIsImxlZnRJbmRleCIsImxlZnQiLCJyaWdodEluZGV4IiwicmlnaHQiLCJsYXllciIsImF0dHJzMSIsImF0dHJzMiIsImF0dHIxIiwiYXR0cjJpbmRleCIsImF0dHIyIiwiZ2VuZXJhdGVJbnRlckxheWVySm9pbnMiLCJnZW5lcmF0ZUluTGF5ZXJKb2lucyIsImdlbmVyYXRlUmFuZG9tSm9pbnMiLCJTd2VlcCIsInNldEV4YWN0V2VpZ2h0cyIsInN3ZWVwUmlnaHQiLCJzd2VlcExlZnQiLCJjdXJDcm9zc2VzIiwibmV3Q3Jvc3NlcyIsImhlYWRlciIsImF0dHJNYXBzIiwiYXR0cmlidXRlIiwib3RoZXJUYWJsZSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFDRkMsWUFBWUMsRUFBT0MsR0FDZkMsS0FBS0YsTUFBUUEsRUFDYkUsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0MsS0FBT0YsRUFDWkMsS0FBS0UsT0FBUyxFQUNkRixLQUFLRyxVQUFZLEVBQ2pCSCxLQUFLSSxZQUFjLEVBQ25CSixLQUFLSyxVQUFZLEVBQ2pCTCxLQUFLTSxTQUFVLEVBR25CVCxVQUFVVSxHQUNOLE9BQUlQLEtB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ICAgIGNvbnN0cnVjdG9yKHRhYmxlLCBuYW1lKXtcclxuICAgICAgICB0aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmF0dHIgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMud2VpZ2h0ID0gMDtcclxuICAgICAgICB0aGlzLmRpZmZFZGdlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5yYW5kb21FZGdlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5zYW1lRWRnZXMgPSAwO1xyXG4gICAgICAgIHRoaXMubXV0YWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZVRvKGFyZzApe1xyXG4gICAgICAgIGlmICh0aGlzLndlaWdodCA+IGFyZzAud2VpZ2h0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy53ZWlnaHQgPCBhcmcwLndlaWdodCkgcmV0dXJuIDE7XHJcbiAgICAgICAgZWxzZSByZXR1cm4gMDtcclxuICAgIH1cclxufSIsImNsYXNzIER1bWJIZXVyaXN0aWMge1xyXG4gICAgY29uc3RydWN0b3IoZyl7XHJcbiAgICAgICAgdGhpcy5nID0gZztcclxuICAgIH1cclxuXHJcbiAgICBhcnJhbmdlKCl7XHJcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuZy5tYXhEZXB0aDsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IGVkZ2VzID0gZy5lZGdlSW5kZXhbaV07XHJcbiAgICAgICAgICAgIGVkZ2VzID0gZWRnZXMuc29ydCgoYSwgYikgPT4gYS5jb21wYXJlVG8oYikpXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8ZWRnZXMubGVuZ3RoLTE7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWRnZTEgPSBlZGdlc1tqXTtcclxuICAgICAgICAgICAgICAgIGxldCBlZGdlMiA9IGVkZ2VzW2orMV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkZ2UxLmxlZnRUYWJsZSA9PSBlZGdlMi5sZWZ0VGFibGUgXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKGVkZ2UxLmxlZnRBdHRyaWJ1dGUubXV0YWJsZSB8fCBlZGdlMi5sZWZ0QXR0cmlidXRlLm11dGFibGUpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2FwKGVkZ2UxLmxlZnRBdHRyaWJ1dGUsIGVkZ2UyLmxlZnRBdHRyaWJ1dGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlMS5yaWdodEF0dHJpYnV0ZS5tdXRhYmxlIHx8IGVkZ2UyLnJpZ2h0QXR0cmlidXRlLm11dGFibGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2UxLnJpZ2h0VGFibGUgPT0gZWRnZTIucmlnaHRUYWJsZSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2FwKGVkZ2UxLnJpZ2h0QXR0cmlidXRlLCBlZGdlMi5yaWdodEF0dHJpYnV0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5zd2FwKGVkZ2UxLnJpZ2h0VGFibGUsIGVkZ2UyLnJpZ2h0VGFibGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3dhcCh3MSwgdzIpe1xyXG4gICAgICAgIGxldCB0bXB3ID0gdzEud2VpZ2h0O1xyXG4gICAgICAgIHcxLndlaWdodCA9IHcyLndlaWdodDtcclxuICAgICAgICB3Mi53ZWlnaHQgPSB0bXB3O1xyXG4gICAgfVxyXG59IiwiY2xhc3MgRWRnZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihsZWZ0VGFibGUsIGF0dDEsIHJpZ3RoVGFibGUsIGF0dDIpe1xyXG4gICAgICAgIHRoaXMubGVmdFRhYmxlID0gbGVmdFRhYmxlO1xyXG4gICAgICAgIHRoaXMuYXR0MSA9IGF0dDE7XHJcbiAgICAgICAgdGhpcy5sZWZ0QXR0cmlidXRlID0gYXR0MTtcclxuICAgICAgICB0aGlzLnJpZ2h0VGFibGUgPSByaWd0aFRhYmxlO1xyXG4gICAgICAgIHRoaXMuYXR0MiA9IGF0dDI7XHJcbiAgICAgICAgdGhpcy5yaWdodEF0dHJpYnV0ZSA9IGF0dDI7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZVRvKG90aGVyRWRnZSl7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdFRhYmxlID09IG90aGVyRWRnZS5sZWZ0VGFibGUpe1xyXG4gICAgICAgICAgICAvLyBlZGdlcyBoYXZlIHRoZSBzYW1lIGxlZnQgdGFibGVcclxuICAgICAgICAgICAgaWYgKHRoaXMucmlnaHRUYWJsZSA9PSBvdGhlckVkZ2UucmlnaHRUYWJsZSl7XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhlIHNhbWUgcmlnaHQgdGFibGVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ID4gb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ICYmIHRoaXMucmlnaHRBdHRyaWJ1dGUud2VpZ2h0IDwgb3RoZXJFZGdlLnJpZ2h0QXR0cmlidXRlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmlnaHRUYWJsZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQgJiYgdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodClcclxuICAgICAgICAgICAgICAgIC8vIHJpZ2h0IHRhYmxlIGlzIHVuZGVyIGJ1dCBsZWZ0IGF0dHJpYnV0ZSBpcyBvdmVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yaWdodFRhYmxlLndlaWdodCA+IG90aGVyRWRnZS5yaWdodFRhYmxlLndlaWdodCAmJiB0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0IDwgb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgLy8gcmlnaHQgdGFibGUgaXMgb3ZlciBidXQgbGVmdCBhdHRyaWJ1dGUgaXMgdW5kZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5yaWdodFRhYmxlID09IG90aGVyRWRnZS5yaWdodFRhYmxlKXtcclxuICAgICAgICAgICAgLy8gZWRnZXMgaGF2ZSB0aGUgc2FtZSByaWdodCB0YWJsZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5sZWZ0VGFibGUgPT0gb3RoZXJFZGdlLmxlZnRUYWJsZSl7XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhlIHNhbWUgbGVmdCB0YWJsZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5sZWZ0VGFibGUud2VpZ2h0IDwgb3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQgJiYgdGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgLy8gbGVmdCB0YWJsZSBpcyB1bmRlciBidXQgcmlnaHQgYXR0cmlidXRlIGlzIG92ZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxlZnRUYWJsZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodCAmJiB0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAvLyBsZWZ0IHRhYmxlIGlzIG92ZXIgYnV0IHJpZ2h0IGF0dHJpYnV0ZSBpcyB1bmRlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZWRnZXMgaGF2ZSBkaWZmZXJlbnQgdGFibGVzIGJvdGggb24gdGhlIGxlZnQgYW5kIG9uIHRoZSByaWdodFxyXG4gICAgICAgICAgICBpZiAodGhpcy5sZWZ0VGFibGUud2VpZ2h0IDwgb3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQgJiYgdGhpcy5yaWdodFRhYmxlLndlaWdodCA+IG90aGVyRWRnZS5yaWdodFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdFRhYmxlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0ICYmIHRoaXMucmlnaHRUYWJsZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmVTZWxmRWRnZVRvKG90aGVyRWRnZSl7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdFRhYmxlLmRlcHRoID09IHRoaXMucmlnaHRUYWJsZS5kZXB0aCAmJiBvdGhlckVkZ2UubGVmdFRhYmxlLmRlcHRoID09IG90aGVyRWRnZS5yaWdodFRhYmxlLmRlcHRoKXtcclxuICAgICAgICAgICAgLy8gdGhleSBhcmUgYm90aCBzZWxmIGVkZ2VzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxlZnRUYWJsZSA9PSBvdGhlckVkZ2UubGVmdFRhYmxlKXtcclxuICAgICAgICAgICAgICAgIC8vIHRoZXkgaGF2ZSB0aGUgc2FtZSBsZWZ0IHRhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodFRhYmxlID09IG90aGVyRWRnZS5yaWdodFRhYmxlKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlIHNhbWUgcmlnaHQgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0IDwgb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ICYmIHRoaXMucmlnaHRUYWJsZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLnJpZ2h0VGFibGUud2VpZ2h0ID4gb3RoZXJFZGdlLnJpZ2h0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubGVmdFRhYmxlID09IG90aGVyRWRnZS5yaWdodFRhYmxlKXtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBsZWZ0IHRhYmxlIG9mIHRoZSBmaXJzdCBpcyB0aGUgcmlnaHQgdGFibGUgb2YgdGhlIG90aGVyXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodFRhYmxlID09IG90aGVyRWRnZS5sZWZ0VGFibGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBsZWZ0IHRhYmxlIGlzIHRoZSBzYW1lIGFzIHRoZSByaWdodCB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0IDwgb3RoZXJFZGdlLnJpZ2h0QXR0cmlidXRlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodFRhYmxlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ID4gb3RoZXJFZGdlLnJpZ2h0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLnJpZ2h0VGFibGUud2VpZ2h0ID4gb3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmlnaHRUYWJsZSA9PSBvdGhlckVkZ2UubGVmdFRhYmxlKXtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSByaWdodCB0YWJsZSBvZiB0aGUgZmlyc3QgaXMgdGhlIGxlZnQgdGFibGUgb2YgdGhlIHNlY29uZFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGVmdFRhYmxlID09IG90aGVyRWRnZS5yaWdodFRhYmxlKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmlnaHRBdHRyaWJ1dGUud2VpZ2h0ID4gb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ICYmIHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmlnaHRBdHRyaWJ1dGUud2VpZ2h0IDwgb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ICYmIHRoaXMubGVmdFRhYmxlLndlaWdodCA8IG90aGVyRWRnZS5yaWdodFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5sZWZ0VGFibGUud2VpZ2h0ID4gb3RoZXJFZGdlLnJpZ2h0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJpZ2h0VGFibGUgPT0gb3RoZXJFZGdlLnJpZ2h0VGFibGUpe1xyXG4gICAgICAgICAgICAgICAgLy8gdGhleSBoYXZlIHRoZSBzYW1lIHJpZ2h0IHRhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0VGFibGUgPT0gb3RoZXJFZGdlLmxlZnRUYWJsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBzYW1lIHJpZ2h0IHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0ICYmIHRoaXMubGVmdFRhYmxlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmlnaHRBdHRyaWJ1dGUud2VpZ2h0ID4gb3RoZXJFZGdlLnJpZ2h0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLmxlZnRUYWJsZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG9uZSBpcyBhIHNlbGYgZWRnZSBidXQgdGhlIG90aGVyIGlzIG5vdFxyXG4gICAgICAgICAgICBpZiAodGhpcy5sZWZ0VGFibGUuZGVwdGggPT0gdGhpcy5yaWdodFRhYmxlLmRlcHRoKXtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCBpcyBhIHNlbGYgZWRnZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGVmdFRhYmxlID09IG90aGVyRWRnZS5sZWZ0VGFibGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCdzIGxlZnQgdGFibGUgaXMgdGhlIHNhbWUgYXMgdGhlIG90aGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodFRhYmxlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdEF0dHJpYnV0ZS53ZWlnaHQgJiYgdGhpcy5yaWdodFRhYmxlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJpZ2h0VGFibGUgPT0gb3RoZXJFZGdlLnJpZ2h0VGFibGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCdzIHJpZ2h0IHRhYmxlIGlzIHRoZSBzYW1lIGFzIHRoZSBvdGhlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLmxlZnRUYWJsZS53ZWlnaHQgPiBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnJpZ2h0QXR0cmlidXRlLndlaWdodCA+IG90aGVyRWRnZS5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiB0aGlzLmxlZnRUYWJsZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhleSBkb24ndCBzaGFyZSBhbnkgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0VGFibGUud2VpZ2h0ID4gb3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQgJiYgdGhpcy5yaWdodFRhYmxlLndlaWdodCA8IG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxlZnRUYWJsZS53ZWlnaHQgPCBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodCAmJiB0aGlzLnJpZ2h0VGFibGUud2VpZ2h0ID4gb3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlY29uZCBpcyBhIHNlbGYgZWRnZVxyXG4gICAgICAgICAgICAgICAgaWYgKG90aGVyRWRnZS5sZWZ0VGFibGUgPT0gdGhpcy5sZWZ0VGFibGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBvdGhlcidzIGxlZnQgdGFibGUgaXMgdGhlIHNhbWUgYXMgdGhlIGZpcnN0J3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0IDwgdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQgPiB0aGlzLmxlZnRUYWJsZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ID4gdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQgPCB0aGlzLmxlZnRUYWJsZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG90aGVyRWRnZS5yaWdodFRhYmxlID09IHRoaXMubGVmdFRhYmxlKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgb3RoZXIncyByaWdodCB0YWJsZSBpcyB0aGUgc2FtZSBhcyB0aGUgZmlyc3QncyByaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0IDwgdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodCA+IHRoaXMubGVmdFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdGhlckVkZ2UucmlnaHRBdHRyaWJ1dGUud2VpZ2h0ID4gdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiBvdGhlckVkZ2UubGVmdFRhYmxlLndlaWdodCA8IHRoaXMubGVmdFRhYmxlLndlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhleSBkb24ndCBzaGFyZSBhbnkgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJFZGdlLmxlZnRUYWJsZS53ZWlnaHQgPCB0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0ICYmIG90aGVyRWRnZS5yaWdodFRhYmxlLndlaWdodCA+IHRoaXMubGVmdEF0dHJpYnV0ZS53ZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG90aGVyRWRnZS5sZWZ0VGFibGUud2VpZ2h0ID4gdGhpcy5sZWZ0QXR0cmlidXRlLndlaWdodCAmJiBvdGhlckVkZ2UucmlnaHRUYWJsZS53ZWlnaHQgPCB0aGlzLmxlZnRBdHRyaWJ1dGUud2VpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcm9zc2VzKG90aGVyRWRnZSl7XHJcbiAgICAgICAgaWYgKHRoaXMubGVmdFRhYmxlLmRlcHRoID09IHRoaXMucmlnaHRUYWJsZS5kZXB0aCB8fCBvdGhlckVkZ2UubGVmdFRhYmxlLmRlcHRoID09IG90aGVyRWRnZS5yaWdodFRhYmxlLmRlcHRoKSBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVNlbGZFZGdlVG8ob3RoZXJFZGdlKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jb21wYXJlVG8ob3RoZXJFZGdlKSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmUoYXJnMCl7XHJcbiAgICAgICAgaWYgKGFyZzAgPT0gdW5kZWZpbmVkKSByZXR1cm4gMTtcclxuICAgICAgICBsZXQgcmV0ID0gdGhpcy5jb21wYXJlQXR0cmlidXRlcyh0aGlzLmxlZnRUYWJsZSwgdGhpcy5sZWZ0QXR0cmlidXRlLCBhcmcwLmxlZnRUYWJsZSwgYXJnMC5sZWZ0QXR0cmlidXRlKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBhcmVBdHRyaWJ1dGVzKHQxLCBhMSwgdDIsIGEyKXtcclxuICAgICAgICBsZXQgcmV0ID0gdDEuY29tcGFyZVRvKHQyKVxyXG4gICAgICAgIGlmIChyZXQgPT0gMCkgcmV0ID0gYTEuY29tcGFyZVRvKGEyKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG5cclxufSIsImNsYXNzIEdyYXBoIHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5lZGdlcyA9IFtdOyBcclxuICAgICAgICB0aGlzLnRhYmxlcyA9IFtdOyBcclxuICAgICAgICB0aGlzLnRhYmxlSW5kZXggPSBbXTsgXHJcbiAgICAgICAgdGhpcy5lZGdlSW5kZXggPSBbXTtcclxuICAgICAgICB0aGlzLm1heERlcHRoID0gMDtcclxuICAgICAgICB0aGlzLm5ld0xheWVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV3TGF5ZXIoKXtcclxuICAgICAgICB0aGlzLnRhYmxlSW5kZXgucHVzaChbXSlcclxuICAgICAgICB0aGlzLmVkZ2VJbmRleC5wdXNoKFtdKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZFRhYmxlKHRhYmxlKXtcclxuICAgICAgICB3aGlsZSh0aGlzLm1heERlcHRoIDwgdGFibGUuZGVwdGgpe1xyXG4gICAgICAgICAgICB0aGlzLm1heERlcHRoKz0xO1xyXG4gICAgICAgICAgICB0aGlzLm5ld0xheWVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhYmxlcy5wdXNoKHRhYmxlKVxyXG4gICAgICAgIHRoaXMudGFibGVJbmRleFt0YWJsZS5kZXB0aF0ucHVzaCh0YWJsZSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRFZGdlKGVkZ2Upe1xyXG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlZGdlKVxyXG4gICAgICAgIHRoaXMuZWRnZUluZGV4W2VkZ2UubGVmdFRhYmxlLmRlcHRoXS5wdXNoKGVkZ2UpXHJcbiAgICB9XHJcblxyXG4gICAgZW5zdXJlVW5pcXVlRWRnZXMoKXtcclxuICAgICAgICAvLyBmaW5pc2hcclxuICAgIH1cclxuXHJcbiAgICBnZXRFZGdlQ3Jvc3NpbmdzKCl7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBkIGluIHRoaXMuZWRnZUluZGV4KSBjb3VudCArPSB0aGlzLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGQpO1xyXG4gICAgICAgIHJldHVybiBjb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChkKXtcclxuICAgICAgICBsZXQgY3Jvc3NpbmdzID0gMDtcclxuICAgICAgICBsZXQgbGF5ZXJFZGdlcyA9IHRoaXMuZWRnZUluZGV4W2RdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpIGluIGxheWVyRWRnZXMpe1xyXG4gICAgICAgICAgICBsZXQgY3VyckVkZ2UgPSBsYXllckVkZ2VzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gcGFyc2VGbG9hdChpKSsxOyBqIDwgbGF5ZXJFZGdlcy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3RoZXJFZGdlID0gbGF5ZXJFZGdlc1tqXTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyRWRnZS5jcm9zc2VzKG90aGVyRWRnZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWRnZSBcIiArIGN1cnJFZGdlLmxlZnRBdHRyaWJ1dGUubmFtZSArIGN1cnJFZGdlLnJpZ2h0QXR0cmlidXRlLm5hbWUgKyBcIiBjcm9zc2VzIFwiICsgb3RoZXJFZGdlLmxlZnRBdHRyaWJ1dGUubmFtZSArIG90aGVyRWRnZS5yaWdodEF0dHJpYnV0ZS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIGNyb3NzaW5ncys9MTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY3Jvc3NpbmdzXHJcbiAgICB9XHJcblxyXG4gICAgc29ydEdyYXBoKCl7XHJcbiAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLnRhYmxlcyl7XHJcbiAgICAgICAgICAgIGlmICghdC5tYWluKSB7XHJcbiAgICAgICAgICAgICAgICB0LmF0dHJpYnV0ZXMgPSB0LmF0dHJpYnV0ZXMuc29ydCgoYSwgYikgPT4gYS53ZWlnaHQgPiBiLndlaWdodD8gMSA6IC0xKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRhYmxlcyA9IHRoaXMudGFibGVzLnNvcnQoKGEsIGIpID0+IGEud2VpZ2h0ID4gYi53ZWlnaHQ/IDEgOiAtMSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRFeGFjdFdlaWdodHMoKXtcclxuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMudGFibGVJbmRleCl7XHJcbiAgICAgICAgICAgIGxldCBsYXllclRhYmxlcyA9IHRoaXMudGFibGVJbmRleFtpXTtcclxuICAgICAgICAgICAgbGF5ZXJUYWJsZXMgPSBsYXllclRhYmxlcy5zb3J0KChhLCBiKSA9PiBhLndlaWdodCA+IGIud2VpZ2h0PyAxIDogLTEpXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogaW4gbGF5ZXJUYWJsZXMpe1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlID0gbGF5ZXJUYWJsZXNbal1cclxuICAgICAgICAgICAgICAgIHRhYmxlLndlaWdodCA9IGpcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYXR0cnMgPSB0YWJsZS5hdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgYXR0cnMgPSBhdHRycy5zb3J0KChhLCBiKSA9PiBhLndlaWdodCA+IGIud2VpZ2h0PyAxIDogLTEpXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgaW4gYXR0cnMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzW2tdLndlaWdodCA9IGtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImNsYXNzIEdyYXBoR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGRlcHRoPTMsIHNlZWQ9XCJoZWxsb1wiLCB0YWJsZURpc3RyaWJ1dGlvbiA9IFsyLDNdLCBhdHRyaWJ1dGVEaXN0cmlidXRpb249WzEsIDVdKXtcclxuICAgICAgICB0aGlzLmQgPSBkZXB0aDtcclxuICAgICAgICB0aGlzLnMgPSAzO1xyXG4gICAgICAgIHRoaXMuamQgPSAwLjE7XHJcbiAgICAgICAgdGhpcy5qcyA9IDAuMDU7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVDb3VudGVyID0gMDtcclxuICAgICAgICB0aGlzLnNlZWQgPSBzZWVkO1xyXG5cclxuICAgICAgICAvLyByYW5kb20gbnVtYmVyIGdlbmVyYXRvcnNcclxuICAgICAgICB0aGlzLnJuZyA9IG5ldyBNYXRoLnNlZWRyYW5kb20odGhpcy5zZWVkKTtcclxuICAgICAgICB0aGlzLnRhYmxlRGlzdCA9ICgpID0+IHRhYmxlRGlzdHJpYnV0aW9uWzBdICsgTWF0aC5yb3VuZCh0aGlzLnJuZygpICogKHRhYmxlRGlzdHJpYnV0aW9uWzFdIC0gdGFibGVEaXN0cmlidXRpb25bMF0pKVxyXG4gICAgICAgIHRoaXMuYXR0ckRpc3QgPSAoKSA9PiBhdHRyaWJ1dGVEaXN0cmlidXRpb25bMF0gKyBNYXRoLnJvdW5kKHRoaXMucm5nKCkgKiAoYXR0cmlidXRlRGlzdHJpYnV0aW9uWzFdIC0gYXR0cmlidXRlRGlzdHJpYnV0aW9uWzBdKSlcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZSgpe1xyXG4gICAgICAgIGcgPSBuZXcgR3JhcGgoKVxyXG5cclxuICAgICAgICBmb3IgKHZhciBpPTE7IGk8dGhpcy5kOyBpKyspe1xyXG4gICAgICAgICAgICBnLm5ld0xheWVyKClcclxuICAgICAgICAgICAgZm9yICh2YXIgaj0wOyBqPHRoaXMudGFibGVEaXN0KCk7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBnLmFkZFRhYmxlKHRoaXMuZ2VuZXJhdGVUYWJsZShpLCBqKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVByb2plY3Rpb25zKGcpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVKb2lucyhnKTtcclxuICAgICAgICBcclxuICAgICAgICBnLmVuc3VyZVVuaXF1ZUVkZ2VzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBnO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlVGFibGUoZGVwdGgsIGluZGV4KXtcclxuICAgICAgICBuYW1lID0gXCJUXCIgKyBkZXB0aCArIFwiX1wiICsgaW5kZXhcclxuICAgICAgICB2YXIgbmV3VGFibGUgPSBuZXcgVGFibGUobmFtZSwgbmFtZSwgZmFsc2UsIGRlcHRoKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRoaXMuYXR0ckRpc3QoKTsgaSsrKXtcclxuICAgICAgICAgICAgbmV3VGFibGUuYWRkQXR0cmlidXRlKFwiYVwiICsgdGhpcy5hdHRyaWJ1dGVDb3VudGVyKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVDb3VudGVyICs9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3VGFibGVcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVByb2plY3Rpb25zKGcpe1xyXG4gICAgICAgIGxldCBsYXllcjEgPSBnLnRhYmxlSW5kZXhbMV07XHJcbiAgICAgICAgbGV0IGxheWVyMWF0dHJzID0gW107XHJcbiAgICAgICAgbGV0IHNlbGVjdFRhYmxlID0gbmV3IFRhYmxlKFwic2VsZWN0XCIsIFwiU0VMRUNUXCIsIHRydWUsIDApXHJcbiAgICAgICAgbGV0IHByb2plY3RlZEF0dHJzID0gW107XHJcbiAgICAgICAgbGV0IHByb2plY3RlZCA9IFtdO1xyXG4gICAgICAgIGxldCBwcm9qZWN0ZWRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHQgb2YgbGF5ZXIxKXtcclxuICAgICAgICAgICAgbGV0IGF0dHJzID0gdC5hdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICBsZXQgc3RyaWN0SW5kZXggPSBNYXRoLmZsb29yKHRoaXMucm5nKCkqYXR0cnMubGVuZ3RoKVxyXG4gICAgICAgICAgICBsZXQgc3RyaWN0ID0gYXR0cnNbc3RyaWN0SW5kZXhdXHJcbiAgICAgICAgICAgIHByb2plY3RlZEF0dHJzLnB1c2goc3RyaWN0KVxyXG4gICAgICAgICAgICBwcm9qZWN0ZWQucHVzaChzdHJpY3QpXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBhdHRyIG9mIGF0dHJzKXtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyICE9IHN0cmljdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIxYXR0cnMucHVzaChuZXcgQXR0cmlidXRlKHQsIGF0dHIpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb2plY3RlZENvdW50Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY291bnRQcm9qZWN0aW9ucyA9IHRoaXMucyAqIChsYXllcjFhdHRycy5sZW5ndGggKyBwcm9qZWN0ZWRDb3VudClcclxuXHJcbiAgICAgICAgZy5hZGRUYWJsZShzZWxlY3RUYWJsZSlcclxuXHJcbiAgICAgICAgZm9yICg7IHByb2plY3RlZENvdW50PGNvdW50UHJvamVjdGlvbnM7IHByb2plY3RlZENvdW50Kyspe1xyXG4gICAgICAgICAgICBsZXQgYXR0ckluZGV4ID0gTWF0aC5mbG9vcih0aGlzLnJuZygpKmxheWVyMWF0dHJzLmxlbmd0aClcclxuICAgICAgICAgICAgbGV0IGF0dHIgPSBsYXllcjFhdHRyc1thdHRySW5kZXhdXHJcbiAgICAgICAgICAgIGxheWVyMWF0dHJzLnNwbGljZShhdHRySW5kZXgsIDEpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBhdHRyIG9mIHByb2plY3RlZEF0dHJzKXtcclxuICAgICAgICAgICAgbGV0IG5ld0F0dHIgPSBuZXcgQXR0cmlidXRlKHNlbGVjdFRhYmxlLCBcImFcIiArIHRoaXMuYXR0cmlidXRlQ291bnRlcisrKVxyXG4gICAgICAgICAgICBuZXdBdHRyLm11dGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZWN0VGFibGUuYXR0cmlidXRlcy5wdXNoKG5ld0F0dHIpXHJcbiAgICAgICAgICAgIGcuYWRkRWRnZShuZXcgRWRnZShzZWxlY3RUYWJsZSwgbmV3QXR0ciwgYXR0ci50YWJsZSwgYXR0cikpXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgLy8gd2VpcmQuIG5vdCBmaW5pc2hlZC5cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUludGVyTGF5ZXJKb2lucyhnKXtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuZDsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IGxlZnRMYXllciA9IGcudGFibGVJbmRleFtpXTtcclxuICAgICAgICAgICAgbGV0IHJpZ2h0TGF5ZXIgPSBnLnRhYmxlSW5kZXhbaSArIDFdO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxlZnRMYXllckF0dHJzID0gW107XHJcbiAgICAgICAgICAgIGxldCByaWdodExheWVyQXR0cnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHRhYmxlIG9mIGxlZnRMYXllcil7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXR0cnMgPSB0YWJsZS5hdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBvZiBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdExheWVyQXR0cnMucHVzaChuZXcgQXR0cmlidXRlKHRhYmxlLCBhdHRyKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgdGFibGUgb2YgcmlnaHRMYXllcil7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVmdExheWVyQXR0cnMubGVuZ3RoID09IDApIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgbGV0IGF0dHJzID0gdGFibGUuYXR0cmlidXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyaWN0ID0gYXR0cnNbTWF0aC5mbG9vcih0aGlzLnJuZygpKmF0dHJzLmxlbmd0aCldXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBsZWZ0SW5kZXggPSBNYXRoLmZsb29yKHRoaXMucm5nKCkqbGVmdExheWVyQXR0cnMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnQgPSBsZWZ0TGF5ZXJBdHRyc1tsZWZ0SW5kZXhdXHJcbiAgICAgICAgICAgICAgICBsZWZ0TGF5ZXJBdHRycy5zcGxpY2UobGVmdEluZGV4LCAxKVxyXG5cclxuICAgICAgICAgICAgICAgIGcuYWRkRWRnZShuZXcgRWRnZShsZWZ0LnRhYmxlLCBsZWZ0LmF0dHIsIHRhYmxlLCBzdHJpY3QpKVxyXG5cclxuICAgICAgICAgICAgICAgIGxlZnQuZGlmZkVkZ2VzKys7XHJcbiAgICAgICAgICAgICAgICBzdHJpY3QuZGlmZkVkZ2VzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBvZiBhdHRycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIgIT0gc3RyaWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodExheWVyQXR0cnMucHVzaChuZXcgQXR0cmlidXRlKHRhYmxlLCBhdHRyKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbGVmdCBvZiBsZWZ0TGF5ZXJBdHRycyl7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRMYXllckF0dHJzLmxlbmd0aCA9PSAwKSBicmVhaztcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJuZygpIDwgdGhpcy5qZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJpZ2h0SW5kZXggPSBNYXRoLmZsb29yKHRoaXMucm5nKCkqcmlnaHRMYXllckF0dHJzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmlnaHQgPSByaWdodExheWVyQXR0cnNbcmlnaHRJbmRleF1cclxuICAgICAgICAgICAgICAgICAgICByaWdodExheWVyQXR0cnMuc3BsaWNlKHJpZ2h0SW5kZXgsIDEpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGcuYWRkRWRnZShuZXcgRWRnZShsZWZ0LnRhYmxlLCBsZWZ0LmF0dHIsIHJpZ2h0LnRhYmxlLCByaWdodC5hdHRyKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdC5kaWZmRWRnZXMrKztcclxuICAgICAgICAgICAgICAgICAgICByaWdodC5kaWZmRWRnZXMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUluTGF5ZXJKb2lucygpe1xyXG4gICAgICAgIGZvciAodmFyIGk9MTsgaTx0aGlzLmQ7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBsYXllciA9IGcudGFibGVJbmRleFtpXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHQxIG9mIGxheWVyKXtcclxuICAgICAgICAgICAgICAgIGxldCBhdHRyczEgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBhdHRyczIgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBhdHRyIG9mIHQxLmF0dHJpYnV0ZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzMS5wdXNoKG5ldyBBdHRyaWJ1dGUodDEsIGF0dHIpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQyIG9mIGxheWVyKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodDEgPT0gdDIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGF0dHIgb2YgdDIuYXR0cmlidXRlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyLnNhbWVFZGdlcyA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMyLnB1c2gobmV3IEF0dHJpYnV0ZSh0MiwgYXR0cikpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGF0dHIxIG9mIGF0dHJzMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJzMi5sZW5ndGggPT0gMCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm5nKCkgPCB0aGlzLmpzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHIyaW5kZXggPSBNYXRoLmZsb29yKHRoaXMucm5nKCkqYXR0cnMyLmxlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHIyID0gYXR0cnMyW2F0dHIyaW5kZXhdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzMi5zcGxpY2UoYXR0cjJpbmRleCwgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGcuYWRkRWRnZShuZXcgRWRnZShhdHRyMS50YWJsZSwgYXR0cjEuYXR0ciwgYXR0cjIudGFibGUsIGF0dHIyLmF0dHIpKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cjEuc2FtZUVkZ2VzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIyLnNhbWVFZGdlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZVJhbmRvbUpvaW5zKCl7XHJcbiAgICAgICAgLy8gZmluaXNoXHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVKb2lucyhnKXtcclxuICAgICAgICB0aGlzLmdlbmVyYXRlSW50ZXJMYXllckpvaW5zKGcpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVJbkxheWVySm9pbnMoZyk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVJhbmRvbUpvaW5zKGcpO1xyXG4gICAgfVxyXG59IiwiY2xhc3MgU3dlZXAge1xyXG4gICAgY29uc3RydWN0b3IoZyl7XHJcbiAgICAgICAgdGhpcy5nID0gZztcclxuICAgIH1cclxuXHJcbiAgICBhcnJhbmdlKCl7XHJcbiAgICAgICAgdGhpcy5nLnNldEV4YWN0V2VpZ2h0cygpO1xyXG4gICAgICAgIHRoaXMuc3dlZXBSaWdodCgpO1xyXG4gICAgICAgIHRoaXMuc3dlZXBMZWZ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3dlZXBSaWdodCgpe1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5nLm1heERlcHRoOyBpKyspe1xyXG4gICAgICAgICAgICBsZXQgbGF5ZXJUYWJsZXMgPSB0aGlzLmcudGFibGVJbmRleFtpXTtcclxuICAgICAgICAgICAgbGV0IGNyb3NzZXMsIGN1ckNyb3NzZXM7XHJcblxyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICBjcm9zc2VzID0gdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGktMSkgKyB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaSk7XHJcbiAgICAgICAgICAgICAgICBjdXJDcm9zc2VzID0gY3Jvc3NlcztcclxuXHJcbiAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NlcyA9IHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTEpICsgdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckNyb3NzZXMgPSBjcm9zc2VzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8bGF5ZXJUYWJsZXMubGVuZ3RoIC0gMTsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQxID0gbGF5ZXJUYWJsZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0MiA9IGxheWVyVGFibGVzW2orMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dhcCh0MSwgdDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Q3Jvc3NlcyA9IHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTEpICsgdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ3Jvc3NlcyA+IG5ld0Nyb3NzZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ3Jvc3NlcyA9IG5ld0Nyb3NzZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyVGFibGVzW2pdID0gdDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllclRhYmxlc1tqKzFdID0gdDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnN3YXAodDEsIHQyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSB3aGlsZSAoY3Jvc3NlcyA+IGN1ckNyb3NzZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICBjcm9zc2VzID0gdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGktMSkgKyB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyQ3Jvc3NlcyA9IGNyb3NzZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGo9MDsgajxsYXllclRhYmxlcy5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhdHRycyA9IGxheWVyVGFibGVzW2pdLmF0dHJpYnV0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrPTA7IGs8YXR0cnMubGVuZ3RoIC0xOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGExID0gYXR0cnNba11cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhMiA9IGF0dHJzW2srMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dhcChhMSwgYTIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdDcm9zc2VzID0gdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGktMSkgKyB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckNyb3NzZXMgPiBuZXdDcm9zc2VzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJDcm9zc2VzID0gbmV3Q3Jvc3NlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trXSA9IGEyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzW2srMV0gPSBhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnN3YXAoYTEsIGEyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlIChjcm9zc2VzID4gY3VyQ3Jvc3Nlcyk7XHJcblxyXG4gICAgICAgICAgICB9IHdoaWxlIChjcm9zc2VzID4gY3VyQ3Jvc3Nlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN3ZWVwTGVmdCgpe1xyXG4gICAgICAgIGZvciAobGV0IGk9dGhpcy5nLm1heERlcHRoOyBpPj0yOyBpLS0pe1xyXG4gICAgICAgICAgICBsZXQgbGF5ZXJUYWJsZXMgPSB0aGlzLmcudGFibGVJbmRleFtpLTFdO1xyXG4gICAgICAgICAgICBsZXQgY3Jvc3NlcywgY3VyQ3Jvc3NlcztcclxuXHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIGNyb3NzZXMgPSB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaS0xKSArIHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTIpO1xyXG4gICAgICAgICAgICAgICAgY3VyQ3Jvc3NlcyA9IGNyb3NzZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNyb3NzZXMgPSB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaS0xKSArIHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckNyb3NzZXMgPSBjcm9zc2VzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8bGF5ZXJUYWJsZXMubGVuZ3RoIC0gMTsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQxID0gbGF5ZXJUYWJsZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0MiA9IGxheWVyVGFibGVzW2orMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3YXAodDEsIHQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0Nyb3NzZXMgPSB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaS0xKSArIHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ3Jvc3NlcyA+IG5ld0Nyb3NzZXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ3Jvc3NlcyA9IG5ld0Nyb3NzZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllclRhYmxlc1tqXSA9IHQyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJUYWJsZXNbaisxXSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5zd2FwKHQxLCB0Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSB3aGlsZSAoY3Jvc3NlcyA+IGN1ckNyb3NzZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICBjcm9zc2VzID0gdGhpcy5nLmdldEVkZ2VDcm9zc2luZ3NBdERlcHRoKGktMSkgKyB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaS0yKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJDcm9zc2VzID0gY3Jvc3NlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPGxheWVyVGFibGVzLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJzID0gbGF5ZXJUYWJsZXNbal0uYXR0cmlidXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGs9MDsgazxhdHRycy5sZW5ndGggLTE7IGsrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYTEgPSBhdHRyc1trXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGEyID0gYXR0cnNbaysxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2FwKGExLCBhMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0Nyb3NzZXMgPSB0aGlzLmcuZ2V0RWRnZUNyb3NzaW5nc0F0RGVwdGgoaS0xKSArIHRoaXMuZy5nZXRFZGdlQ3Jvc3NpbmdzQXREZXB0aChpLTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJDcm9zc2VzID4gbmV3Q3Jvc3Nlcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ3Jvc3NlcyA9IG5ld0Nyb3NzZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnNba10gPSBhMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trKzFdID0gYTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5zd2FwKGExLCBhMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlIChjcm9zc2VzID4gY3VyQ3Jvc3Nlcyk7XHJcblxyXG4gICAgICAgICAgICB9IHdoaWxlIChjcm9zc2VzID4gY3VyQ3Jvc3Nlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN3YXAodzEsIHcyKXtcclxuICAgICAgICBsZXQgdG1wdyA9IHcxLndlaWdodDtcclxuICAgICAgICB3MS53ZWlnaHQgPSB3Mi53ZWlnaHQ7XHJcbiAgICAgICAgdzIud2VpZ2h0ID0gdG1wdztcclxuICAgIH1cclxufSIsImNsYXNzIFRhYmxlIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGhlYWRlciwgbWFpbiwgZGVwdGgpe1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBoZWFkZXI7XHJcbiAgICAgICAgdGhpcy5tYWluID0gbWFpbjtcclxuICAgICAgICB0aGlzLmRlcHRoID0gZGVwdGg7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gW107XHJcbiAgICAgICAgdGhpcy5hdHRyTWFwcyA9IFtdO1xyXG4gICAgICAgIHRoaXMud2VpZ2h0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRBdHRyaWJ1dGUoYXR0cmlidXRlKXtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucHVzaChuZXcgQXR0cmlidXRlKHRoaXMsIGF0dHJpYnV0ZSkpXHJcbiAgICB9XHJcblxyXG4gICAgY29tcGFyZVRvKG90aGVyVGFibGUpe1xyXG4gICAgICAgIGlmICh0aGlzLmRlcHRoID4gb3RoZXJUYWJsZS5kZXB0aCkgcmV0dXJuIC0xO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGVwdGggPCBvdGhlclRhYmxlLmRlcHRoKSByZXR1cm4gMTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2VpZ2h0IDwgb3RoZXJUYWJsZS53ZWlnaHQpIHJldHVybiAxO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLndlaWdodCA+IG90aGVyVGFibGUud2VpZ2h0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19
